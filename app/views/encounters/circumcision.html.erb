
<script src="/time-picker/js/jquery.js"></script>
<script src="/time-picker/js/timepicki.js"></script>

<style type="text/css">
  #content, .inputPage{
    height: 545px !important;
  }

  #content{
    position: relative;
    margin-left: 2px;
    width: 99.7%;
    top: 383px;
  }
  .buttonsDiv{
    position: fixed;
    top: auto;
    bottom: -20px;
    margin-bottom: 2%;
    z-index: 1000;
  }

  #minute{
    display: none;
  }

  #hour{
    height: 200px !important;
  }
</style>

<form action="/encounters/create" method="POST" target="_top">
  <%= hidden_field_tag "encounter[encounter_type_name]", "CIRCUMCISION" %>
  <%= hidden_field_tag "encounter[patient_id]", @patient.patient_id %>
  <%= hidden_field_tag "encounter[encounter_datetime]", DateTime.now() %>
  <%= hidden_field_tag "encounter[provider_id]", "" %>

  <%= text_field_tag "circumcision_year", Date.today.year,
    {
    :id => 'circumcision_year',
    :helpText => 'Circumcision year',
    :field_type => 'number',
    :tt_pageStyleClass => "Numeric NumbersOnly"
  }  %>

  <%= select_tag "circumcision_month", month_name_options,
    {
    :id => 'circumcision_month',
    :helpText => 'Circumcision month',
    :tt_onLoad => "__$('keyboard').style.display = 'none'",
    :tt_onUnLoad => ""
  } %>


  <%= text_field_tag "circumcision_day",  nil, {
    :field_type => 'number',
    :helpText => "Circumcision day"} %>

  <%= text_field_tag "anaesthesia time", nil, {
    :helpText => 'Time anaesthesia given (24 Hour clock)',
    :tt_onLoad => "__$('keyboard').style.display = 'none';",
    :field_type => 'advancedTime',
    :id => 'anaesthesia_time'}  %>

  <%= (touch_select_tag "TYPE OF ANAESTHESIA", @patient, options_for_select(@anaesthesia_types),
    {
      :helpText  => "Type of anaesthesia"
    }).html_safe %>

  <%= (touch_text_field_tag "ANAESTHESIA QUANTITY", @patient, nil,
    {
      :id => "anaesthesia-quantity",
      :field_type => 'number',
      :helpText => "Anaesthesia quantity given (ml)",
      :tt_pageStyleClass => "Numeric NumbersOnlyWithDecimal"
    }).html_safe %>

  <%= (touch_select_tag "PROCEDURE TYPE", @patient, options_for_select(@circumcision_procedure_types),
    {
      :id => "procedure-type",
      :helpText  => "Procedure Type"
    }).html_safe %>

  <%= (touch_text_field_tag "INCISION TIME", @patient, nil,
    {
      :id => "incision_time",
      :helpText => "Incision time"
    }).html_safe %>

  <%= (touch_select_tag "INTRA-OP ADVERSE EVENTS?", @patient, options_for_select(["", "Yes", "No"]),
    {
      :id => "adverse_events?",
      :helpText  => "Any Intra-OP Adverse events"
    }).html_safe %>

  <%= (touch_text_field_tag "SPECIFIC ADVERSE EVENT", @patient, nil,
    {
      :id => "incision_time",
      :condition => "__$('adverse_events?').value.match(/YES/i)",
      :helpText => "Specify adverse event"
    }).html_safe %>

  <%= (touch_text_field_tag "TIME LEFT TABLE", @patient, nil,
    {
      :id => "time_left_table",
      :helpText => "Time left table"
    }).html_safe %>

</form>
