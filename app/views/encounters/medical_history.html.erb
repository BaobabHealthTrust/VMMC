<style type="text/css">
  #content, .inputPage{
    height: 545px !important;
  }

  #content{
    position: relative;
    margin-left: 2px;
    width: 99.7%;
    top: 383px;
  }
  .buttonsDiv{
    position: fixed;
    top: auto;
    bottom: -20px;
    margin-bottom: 2%;
    z-index: 1000;
  }

  .NoKeyboard .inputFrameClass {
    height: 460px !important;
  }

  .inputFrameClass .options{
    height: 400px !important;
  }
</style>

<form action="/encounters/create" method="POST" target="_top">
  <%= hidden_field_tag "encounter[encounter_type_name]", "MEDICAL HISTORY" %>
  <%= hidden_field_tag "encounter[patient_id]", @patient.patient_id %>
  <%= hidden_field_tag "encounter[encounter_datetime]", DateTime.now() %>
  <%= hidden_field_tag "encounter[provider_id]", User.current.person_id%>

  <%= (touch_select_tag "MEDICAL HISTORY", @patient, options_for_select(@medical_history_options),
    { :id => 'medical_history_id',
      :multiple => true,
      :helpText  => "Medical history"
    }).html_safe %>

  <%= hidden_field_tag("observations[][concept_name]", "MEDICAL HISTORY") %>
  <%= text_field_tag 'observations[][value_coded_or_text]', nil,
                       {:id => 'other_medical_history',
                        :field_type => 'alpha',
                        :helpText => 'Enter other medical history',
                        :condition => "$('medical_history_id').value == 'Other'",
                        :allowFreeText => true }%>

</form>